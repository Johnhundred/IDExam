jQuery("document").ready(function(){function e(e){localStorage.sPartner=e,setTimeout(function(){window.location.href="/partnerTemplate.html"},100)}function t(e){localStorage.sEvent=e,setTimeout(function(){window.location.href="/eventTemplate.html"},100)}function n(){localStorage.sFrontpage=L(".search-bar input").val(),setTimeout(function(){window.location.href="/events.html"},100)}function a(){var e="";null!==localStorage.getItem("sFrontpage")?(e=localStorage.sFrontpage,L(".events-container .search-bar input").val(e),e=e.toLowerCase(),localStorage.removeItem("sFrontpage")):e=L(".events-container .search-bar input").val().toLowerCase(),d();for(var t=jQuery.extend(!0,{},M),n=[],a=t.events.length,r=0;r<a;r++)-1!=t.events[r].title.toLowerCase().indexOf(e)?(n.push(t.events[r]),t.events.splice(r,1),r--,a--):-1!=t.events[r].description.toLowerCase().indexOf(e)?(n.push(t.events[r]),t.events.splice(r,1),r--,a--):-1!=t.events[r].organizer.toLowerCase().indexOf(e)?(n.push(t.events[r]),t.events.splice(r,1),r--,a--):-1!=t.events[r].location.toLowerCase().indexOf(e)&&(n.push(t.events[r]),t.events.splice(r,1),r--,a--);var i=L(".filter-list input:checked"),l=i.length;if(l&&l>0)for(var s=0;s<l;s++)if(L(i[s]).parent().parent().hasClass("event-location"))for(var o=L(i[s]).val().toLowerCase(),c=n.length,p=0;p<c;p++)-1==n[p].location.toLowerCase().indexOf(o)&&(n.splice(p,1),p--,c--);else if(L(i[s]).parent().parent().hasClass("event-price")){if(1==L(i[s]).attr("data-price-id")){console.log("Free");for(var v=n.length,f=0;f<v;f++){var m=""+n[f].price;m=m.toLowerCase(),(Number(n[f].price)&&Number(n[f].price)>0||"free"!=m)&&(n.splice(f,1),f--,v--)}}else if(2==L(i[s]).attr("data-price-id")){console.log("Paid");for(var h=n.length,g=0;g<v;g++)Number(n[g].price)&&Number(n[g].price)<1&&(n.splice(g,1),g--,h--)}}else if(L(i[s]).parent().parent().hasClass("event-date"))for(var b=L(i[s]).attr("data-date-id"),w=(new Date).getMonth(),y=(new Date).getMonth()+1,S=n.length,C=0;C<S;C++){var x=new Date(n[C].date).getMonth();1==b&&w!=x&&(n.splice(C,1),C--,S--),2==b&&y!=x&&(n.splice(C,1),C--,S--)}else if(L(i[s]).parent().parent().hasClass("event-sponsor"))for(var E=n.length,O=0;O<E;O++)void 0!==n[O].partners.partners&&0==n[O].partners.partners.length&&(n.splice(O,1),O--,E--);for(var P=[],I="",A=n.length,D=0;D<A;D++){I+=W.replace("{{id}}",n[D].id),I=I.replace("{{title}}",n[D].title);var N=n[D].partners.partners.length;if(N>0)for(var k=0;k<N;k++){u();for(var T=0;T<Y.partners.length;T++)n[D].partners.partners[k]==Y.partners[T].id&&P.push(Y.partners[T].name)}for(var B="",J=0;J<P.length;J++){B+=J<P.length-1?P[J]+" | ":P[J]}I=I.replace("{{partners}}",B);var z="";n[D].description.length>255?(z=L.trim(n[D].description).substring(0,255),z+="..."):z=L.trim(n[D].description),I=I.replace("{{description}}",z),I=I.replace("{{date}}",n[D].date);var q=""+n[D].price;"free"!=q.toLowerCase()&&(q+=" DKK"),I=I.replace("{{price}}",q),I=I.replace("{{location}}",n[D].location)}""==I&&(I="<h5 class='event-list-error'>No results.</h5>"),L(".results-container").empty().append(I)}function r(){B=JSON.parse(localStorage.sAdmins)}function i(e){return B=JSON.parse(localStorage.sAdmins),B.admins.push(e),localStorage.sAdmins=JSON.stringify(B),!0}function l(e){B=JSON.parse(localStorage.sAdmins);for(var t=B.admins.length,n=0;n<t;n++)B.admins[n].id==e.id&&(B.admins[n]=e);return localStorage.sAdmins=JSON.stringify(B),!0}function s(e){r();for(var t=B.admins.length,n=0;n<t;n++)B.admins[n].id==e&&B.admins.splice(n,1);return localStorage.sAdmins=JSON.stringify(B),x(),!0}function o(){return null===localStorage.getItem("bAdmin")?(localStorage.bAdmin=!1,T=!1):(T=localStorage.bAdmin,"true"===T.toLowerCase()&&(T=!0)),T}function d(){null!==localStorage.getItem("sEvents")&&(M=JSON.parse(localStorage.sEvents))}function c(e){return d(),M.events.push(e),localStorage.sEvents=JSON.stringify(M),!0}function p(e){d();for(var t=M.events.length,n=0;n<t;n++)M.events[n].id==e.id&&(M.events[n]=e);return localStorage.sEvents=JSON.stringify(M),!0}function v(e){d();for(var t=M.events.length,n=0;n<t;n++)M.events[n].id==e&&M.events.splice(n,1);return localStorage.sEvents=JSON.stringify(M),E(),!0}function u(){null!==localStorage.getItem("sPartners")&&(Y=JSON.parse(localStorage.sPartners))}function f(e){return u(),Y.partners.push(e),localStorage.sPartners=JSON.stringify(Y),!0}function m(e){u();for(var t=Y.partners.length,n=0;n<t;n++)Y.partners[n].id==e.id&&(Y.partners[n]=e);return localStorage.sPartners=JSON.stringify(Y),!0}function h(e){u();for(var t=Y.partners.length,n=0;n<t;n++)Y.partners[n].id==e&&Y.partners.splice(n,1);return localStorage.sPartners=JSON.stringify(Y),O(),!0}function g(e){var t=L(e).children("#lblAdminUsername").val(),n=L(e).children("#lblAdminPassword").val();r();for(var a=B.admins.length,i=0;i<a;i++){if(B.admins[i].username==t&&B.admins[i].password==n){localStorage.bAdmin=!0,x(),L(".wdw-admin-picker").fadeIn(),J||b(!0);break}localStorage.bAdmin=!1,J||b(!1)}L(e).children("#lblAdminUsername").val(""),L(e).children("#lblAdminPassword").val("")}function b(e){J=!0,e?(L("#lblAdminLogin span").text("Login successful.").fadeIn(),setTimeout(function(){L("#lblAdminLogin span").fadeOut(),J=!1,L(".wdw-login form").fadeOut(),setTimeout(function(){L(".admin-logout").fadeIn()},750)},1e3)):(L("#lblAdminLogin span").text("Login failed.").fadeIn(),setTimeout(function(){L("#lblAdminLogin span").fadeOut(),J=!0},1e3))}function w(e){var t=L(e).children("#lblAdminNewUsername").val(),n=L(e).children("#lblAdminNewPassword").val();r();var a={};a.id=k(),a.username=t,a.password=n,i(a),L(e).children("#lblAdminNewUsername").val(""),L(e).children("#lblAdminNewPassword").val(""),x()}function y(e){var t=L(e).find("#lblEventImage").val(),n=L(e).find("#lblEventTitle").val(),a=L(e).find("#lblEventOrganizer").val(),r=L(e).find("#lblEventDate").val(),i=L(e).find("#lblEventPrice").val(),l=L(e).find("#lblEventLocation").val(),s=L(e).find("#lblEventDescription").val();d();var o={};o.id=k(),o.img=t,o.title=n,o.organizer=a,o.date=r,o.price=i,o.location=l,"1"==F.id?o.partners=F:o.partners={id:"1",partners:[]},o.description=s,c(o),L(e).children().val(""),E()}function S(e){var t=L(e).find("#lblPartnerImage").val(),n=L(e).find("#lblPartnerName").val(),a=L(e).find("#lblPartnerCEO").val(),r=L(e).find("#lblPartnerWebsite").val(),i=L(e).find("#lblPartnerHeadquarters").val(),l=L(e).find("#lblPartnerDescription").val();u();var s={};s.id=k(),s.img=t,s.ceo=a,s.website=r,s.headquarters=i,s.description=l,s.name=n,f(s),L(e).find('input[type="text"]').val(""),L(e).find("textarea").val(""),O()}function C(e){1==o()&&(L(".pick-window").css("display","none"),L(".wdw-admin-picker ul li").removeClass("active"),L(e).addClass("active"),L(e).children("a").hasClass("admin-event-list")?(E(),L(".wdw-event-list").fadeIn()):L(e).children("a").hasClass("admin-partner-list")?(O(),L(".wdw-partner-list").fadeIn()):L(e).children("a").hasClass("admin-admin-list")&&(x(),L(".wdw-admin-list").fadeIn()))}function x(){var e="";r();for(var t=B.admins.length,n=0;n<t;n++)e+=z.replace("{{name}}",B.admins[n].username),e=e.replace("{{id}}",B.admins[n].id);L(".wdw-admin-list div").empty().append(e)}function E(){var e="";d();for(var t=M.events.length,n=0;n<t;n++){e+=U.replace("{{id}}",M.events[n].id),e=e.replace("{{img}}",M.events[n].img),e=e.replace("{{title}}",M.events[n].title),e=e.replace("{{organizer}}",M.events[n].organizer),e=e.replace("{{date}}",M.events[n].date),e=e.replace("{{price}}",M.events[n].price),e=e.replace("{{location}}",M.events[n].location);var a=0;void 0!==M.events[n].partners.partners&&(a=M.events[n].partners.partners.length),e=e.replace("{{partners}}",a+" Partners"),e=e.replace("{{partnersData}}",a),e=e.replace("{{description}}",M.events[n].description)}L(".wdw-event-list div.event-list").empty().append(e)}function O(){var e="";u();for(var t=Y.partners.length,n=0;n<t;n++)e+=j.replace("{{id}}",Y.partners[n].id),e=e.replace("{{img}}",Y.partners[n].img),e=e.replace("{{name}}",Y.partners[n].name),e=e.replace("{{ceo}}",Y.partners[n].ceo),e=e.replace("{{website}}",Y.partners[n].website),e=e.replace("{{headquarters}}",Y.partners[n].headquarters),e=e.replace("{{description}}",Y.partners[n].description);L(".wdw-partner-list div.partner-list").empty().append(e)}function P(e){e=e||"1";var t=[];d();for(var n=M.events.length,a=0;a<n;a++)M.events[a].id==e&&(t=M.events[a].partners.partners,console.log(t));var r='<div class="partner-wrap">';u();for(var i=Y.partners.length,l=t.length,s=0;s<i;s++){if(r+=H.replace("{{partnerId}}",Y.partners[s].id),r=r.replace("{{partner}}",Y.partners[s].name),l>0)for(var o=0;o<l;o++)t[o]==Y.partners[s].id&&(r=r.replace("{{checked}}","checked"));r=r.replace("{{checked}}","")}r+='</div><input type="submit" value="SUBMIT">',L(".partner-modal-form").attr("data-event-id",e).empty().append(r),L("#wdw-partner-modal").fadeIn()}function I(e){F.id=L(e).attr("data-event-id");for(var t=L(e).find("input:checked"),n=[],a=0;a<t.length;a++)n.push(L(t[a]).attr("data-partner-id"));F.partners=n,d();for(var r=M.events.length,a=0;a<r;a++)if(M.events[a].id==F.id){M.events[a].partners=F,p(M.events[a]),E();break}L("#wdw-partner-modal").fadeOutgit()}function A(e){if(L(e).hasClass("admin-list-item")){var t=L(e).children("h3:first-child").text();t=t.split(": "),t=t[1];var n=L(e).children("h3:nth-child(2)").text();n=n.split(": "),n=n[1];var a="";a+=q.replace("{{name}}",t).replace("{{id}}",n),L("#modal-top h2").empty().text("Edit Admin: "+t),L("#modal-middle").empty().append(a),L("#wdw-admin-modal").fadeIn()}if(L(e).hasClass("lblPartnerCreate")){var n=L(e).find(".lblPartnerId").val(),r=L(e).find(".lblPartnerImage").val(),t=L(e).find(".lblPartnerName").val(),i=L(e).find(".lblPartnerCEO").val(),l=L(e).find(".lblPartnerWebsite").val(),s=L(e).find(".lblPartnerHeadquarters").val(),o=L(e).find(".lblPartnerDescription").val(),c={};c.id=n,c.img=r,c.ceo=i,c.website=l,c.headquarters=s,c.description=o,c.name=t,m(c),O()}if(L(e).hasClass("lblEventCreate")){var n=L(e).find(".lblEventId").val(),r=L(e).find(".lblEventImage").val(),v=L(e).find(".lblEventTitle").val(),u=L(e).find(".lblEventOrganizer").val(),f=L(e).find(".lblEventDate").val(),h=L(e).find(".lblEventPrice").val(),g=L(e).find(".lblEventLocation").val(),o=L(e).find(".lblEventDescription").val();d();var b={};if(b.id=n,b.img=r,b.title=v,b.organizer=u,b.date=f,b.price=h,b.location=g,F.id==n)b.partners=F;else for(var w=0;w<M.events.length;w++)M.events[w].id==n&&(b.partners=M.events[w].partners);b.description=o,p(b),E()}}function D(e){if(L(e).hasClass("admin-list-item")){var t=L(e).attr("data-admin-id");console.log(t),swal({title:"Are you sure?",text:"You will not be able to recover this admin user!",type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Yes, delete it!",closeOnConfirm:!1},function(){swal("Deleted!","The admin user has been deleted.","success"),s(t)})}if(L(e).hasClass("partner-item")){var t=L(e).find('input[type="hidden"]').val();console.log(t),swal({title:"Are you sure?",text:"You will not be able to recover this partner!",type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Yes, delete it!",closeOnConfirm:!1},function(){swal("Deleted!","The partner has been deleted.","success"),h(t)})}if(L(e).hasClass("event-item")){var t=L(e).find('input[type="hidden"]').val();console.log(t),swal({title:"Are you sure?",text:"You will not be able to recover this event!",type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Yes, delete it!",closeOnConfirm:!1},function(){swal("Deleted!","The event has been deleted.","success"),v(t)})}}function N(e){var t=L(e).children("input:first-child").val(),n=L(e).children("input:nth-child(2)").val(),a={};r();for(var i=B.admins.length,s=0;s<i;s++)B.admins[s].id==n&&(a=B.admins[s]);a.username=t,a.id=n,l(a),x(),L("#wdw-admin-modal").fadeOut()}function k(){var e="";return e=(Math.random().toString(16)+"000000000").substr(2,8),e+=L.now().toString()}var L=jQuery.noConflict();console.log("Page loaded and ready.");var T,B={admins:[]},J=!1,z='<div class="admin-list-item" data-admin-id="{{id}}"><h3>Name: {{name}}</h3><i class="fa fa-trash-o delete-item" aria-hidden="true"></i></div>',q='<div class="modal-admin-edit-form-container"><form><input type="text" placeholder="Name..." value="{{name}}"><input type="text" placeholder="ID..." value="{{id}}"><input type="submit" value="SUBMIT"></form></div>',M={events:[]},U='<div class="event-item round-corners"><form class="lblEventCreate"><div><input class="lblEventImage" type="text" value="{{img}}"></div><div><div><input class="lblEventTitle" type="text" value="{{title}}"><input class="lblEventOrganizer" type="text" value="{{organizer}}"><input class="lblEventDate" type="date" value="{{date}}"><input class="lblEventPrice" type="text" value="{{price}}"><input class="lblEventLocation" type="text" value="{{location}}"><a class="btn-partners" href="#" data-partners="{{partnersData}}">{{partners}}</a><input type="submit" class="btnEventCreate" value="SUBMIT"></div><div><textarea class="lblEventDescription">{{description}}</textarea></div></div><input class="lblEventId" type="hidden" value="{{id}}"></form><i class="fa fa-trash-o delete-item" aria-hidden="true"></i></div>',F={id:"",partners:[]},Y={partners:[]},j='<div class="partner-item round-corners"><form class="lblPartnerCreate"><div><input class="lblPartnerImage" type="text" value="{{img}}"></div><div><div><input class="lblPartnerName" type="text" value="{{name}}"><input class="lblPartnerCEO" type="text" value="{{ceo}}"><input class="lblPartnerWebsite" type="text" value="{{website}}"><input class="lblPartnerHeadquarters" type="text" value="{{headquarters}}"><input class="btnPartnerCreate" type="submit" value="SUBMIT"></div><div><textarea class="lblPartnerDescription">{{description}}</textarea></div></div><input class="lblPartnerId" type="hidden" value="{{id}}"></form><i class="fa fa-trash-o delete-item" aria-hidden="true"></i></div>',H='<div class="partner-modal-item"><div><input type="checkbox" data-partner-id="{{partnerId}}" {{checked}}></div><h5>{{partner}}</h5></div>';!function(){if(null===localStorage.getItem("sAdmins")){var e={id:k(),username:"admin",password:"admin"};B.admins.push(e),localStorage.sAdmins=JSON.stringify(B)}else B=JSON.parse(localStorage.sAdmins)}();var Q='<div class="partner-card" data-partner-id="{{id}}"><img src="{{img}}"><h2>{{name}}</h2></div>',W='<div class="event-result" data-event-id="{{id}}"><h2>{{title}}</h2><h3>{{partners}}</h3><pre>{{description}}</pre><p class="event-info">{{date}} | {{price}} | {{location}}</p><button>MORE INFORMATION</button></div>';L("#lblAdminLogin").submit(function(e){e.preventDefault(),g(this)}),L("#lblAdminCreate").submit(function(e){e.preventDefault(),w(this)}),L("#lblEventCreate").submit(function(e){e.preventDefault(),y(this)}),L("#lblPartnerCreate").submit(function(e){e.preventDefault(),S(this)}),L(".wdw-admin-picker ul li").click(function(){C(this)}),L(document).on("click",".admin-list-item .edit-item",function(){A(L(this).parent())}),L(document).on("submit",".lblPartnerCreate",function(){A(this)}),L(document).on("submit",".lblEventCreate",function(){A(this)}),L(document).on("click",".wdw-event-list a",function(){var e=L(this).parent().parent().parent().find(".lblEventId").val();e?P(e):P()}),L(document).on("click",".delete-item",function(){D(L(this).parent())}),L(document).on("click",'.modal-admin-edit-form-container form input[type="submit"]',function(e){e.preventDefault(),N(L(this).parent())}),L(".admin-logout").click(function(){localStorage.bAdmin=!1}),L(".partner-modal-form").submit(function(e){e.preventDefault(),I(this)}),L(document).on("click",".partner-card",function(){e(L(this).attr("data-partner-id"))}),L(".front-page .search-bar input").keypress(function(e){13==e.which&&n()}),L(".front-page .search-bar button").click(function(){n()}),L(".events-container .search-bar input").keypress(function(e){13==e.which&&a()}),L(".events-container .search-bar button").click(function(){a()}),L(document).on("click",".event-result button",function(){t(L(this).parent().attr("data-event-id"))}),L("#partner-modal-content>i").click(function(){L("#wdw-partner-modal").fadeOut()}),L("body>div").hasClass("events-container")&&a(),L("body>div").hasClass("pt")&&function(){if(null!==localStorage.getItem("sPartner")){u();for(var e={},t=Y.partners.length,n=0;n<t;n++)Y.partners[n].id==localStorage.sPartner&&(e=Y.partners[n]);L(".partner-title h2").text(e.name);var a="<h3>Partner Description</h3>";a+="<pre>"+e.description,a+="</pre>",L(".partner-desc").empty().append(a),L(".partner-logo img").attr("src",e.img),L(".CEO p").text(e.ceo),L(".website p a").attr("href",e.website).text(e.website),L(".headquarters p").text(e.headquarters)}}(),L("body>div").hasClass("et")&&function(){if(null!==localStorage.getItem("sEvent")){d();for(var e={},t=M.events.length,n=0;n<t;n++)M.events[n].id==localStorage.sEvent&&(e=M.events[n]);L(".partner-title h2").text(e.title);var a="<h3>Event Description</h3>";a+="<pre>"+e.description,a+="</pre>",L(".event-content").empty().append(a);var r=[],i=e.partners.partners.length;if(i>0)for(var l=0;l<i;l++){u();for(var s=0;s<Y.partners.length;s++)e.partners.partners[l]==Y.partners[s].id&&r.push(Y.partners[s].img)}for(var o="",c=r.length,p=0;p<c;p++)o+='<img src="'+r[p]+'" alt="partner-logo">';L(".event-partners").empty().append(o),L(".partner-logo img").attr("src",e.img),L(".organizer p").text(e.organizer),L(".date p").text(e.date),L(".price p").text(e.price),L(".location p").text(e.location)}}(),function(){var e="";u();for(var t=Y.partners.length,n=0;n<t;n++)e+=Q.replace("{{img}}",Y.partners[n].img),e=e.replace("{{name}}",Y.partners[n].name),e=e.replace("{{id}}",Y.partners[n].id);L(".partner-container").empty().append(e)}(),function(){setTimeout(function(){L("body").addClass("loaded")},1e3)}(),setInterval(function(){1==o()?(L(".wdw-admin-picker").fadeIn(),L("#lblAdminLogin").fadeOut(),L(".admin-logout").fadeIn()):(L(".wdw-admin-picker").fadeOut(),L(".pick-window").fadeOut(),L(".admin-logout").fadeOut(),"none"==L("#lblAdminLogin").css("display")&&L("#lblAdminLogin").css("display","flex").hide().fadeIn())},500)});